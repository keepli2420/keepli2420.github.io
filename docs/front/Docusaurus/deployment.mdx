---
description: é¡¹ç›®éƒ¨ç½²
custom_edit_url: null
---

import BrowserWindow from "@site/src/components/BrowserWindow";{/* ç»„ä»¶æ ·å¼ */}
{/* å¼•ç”¨æœ¬åœ°æ ·å¼ */}
import styles from "@site/src/css/markdown-features-react.module.css";
import Tabs from '@theme/Tabs';{/* é€‰é¡¹å¡ */}
import TabItem from '@theme/TabItem';


# éƒ¨ç½²

è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ„å»ºç½‘ç«™çš„é™æ€æ–‡ä»¶ï¼Œè¯·è¿è¡Œï¼š
````mdx-code-block
<Tabs>
<TabItem value="npm" label="npm" default>

```bash
npm run build
```
</TabItem>
<TabItem value="yarn" label="yarn">

```bash npm2yarn
yarn run build
```
</TabItem>
</Tabs>
`````
å®Œæˆåï¼Œé™æ€æ–‡ä»¶ä¼šè¢«ç”Ÿæˆåœ¨ `build` ç›®å½•ä¸­ã€‚

:::note å¤‡æ³¨
Docusaurus åªè´Ÿè´£æ„å»ºç«™ç‚¹ï¼Œç„¶åæŠŠé™æ€æ–‡ä»¶è¾“å‡ºåˆ° `build` æ–‡ä»¶å¤¹ã€‚

ç°åœ¨ï¼Œè¯¥ç”±ä½ æ¥å†³å®šæ€ä¹ˆæ‰˜ç®¡è¿™äº›é™æ€æ–‡ä»¶äº†ã€‚
:::

ä½ å¯ä»¥æŠŠä½ çš„ç½‘ç«™éƒ¨ç½²åˆ°é™æ€ç½‘ç«™æ‰˜ç®¡æœåŠ¡ä¸Šï¼Œæ¯”å¦‚ `Vercel`ã€`GitHub Pages`ã€`Netlify`ã€`Render`ã€`Surge`ï¼Œç­‰ç­‰ã€‚

Docusaurus ç½‘ç«™æ˜¯é™æ€æ¸²æŸ“çš„ï¼Œè€Œä¸”ä¸€èˆ¬ä¸éœ€è¦ JavaScript ä¹Ÿèƒ½è¿è¡Œï¼

## é…ç½®
åœ¨ `docusaurus.config.js` ä¸­ï¼Œä¸‹é¢è¿™äº›å‚æ•°æ˜¯å¿…å¡«çš„ï¼Œè®© Docusaurus èƒ½å¤Ÿä¼˜åŒ–è·¯ç”±ï¼Œå¹¶ä»æ­£ç¡®çš„ä½ç½®åŠ è½½æ–‡ä»¶ï¼š

| å‚æ•°    | æè¿°                                                         |
| ------- | ------------------------------------------------------------ |
| `url`   | ç«™ç‚¹ URLã€‚ å¦‚æœç½‘ç«™éƒ¨ç½²åœ¨ `https://my-org.com/my-project/`ï¼Œ `url` å°±æ˜¯ `https://my-org.com/` |
| `baseUrl` | ç«™ç‚¹çš„ base URLï¼Œå¸¦æœ‰æœ«å°¾æ–œæ ã€‚ å¦‚æœç½‘ç«™éƒ¨ç½²åœ¨ `https://my-org.com/my-project/`ï¼Œ` baseUrl` å°±æ˜¯ `/my-project/` |

## æœ¬åœ°æµ‹è¯•æ„å»º
åœ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒå‰ï¼Œäº‹å…ˆè¿›è¡Œæœ¬åœ°æµ‹è¯•å°¤ä¸ºé‡è¦ã€‚ Docusaurus provides a docusaurus serve command for that:

````mdx-code-block
<Tabs>
<TabItem value="npm" label="npm" default>

```bash
npm run serve
```
</TabItem>
<TabItem value="yarn" label="yarn">

```bash npm2yarn
yarn run serve
```
</TabItem>
</Tabs>
`````
ç«™ç‚¹é»˜è®¤ä¸ºéƒ¨ç½²åœ¨ [http://localhost:3000/](http://localhost:3000/)

## æœ«å°¾æ–œæ é…ç½®

Docusaurus has a [trailingSlash config](https://docusaurus.io/zh-CN/docs/api/docusaurus-config#trailingSlash), 
to allow customizing URLs/links and emitted filename patterns.

ä½ ä¸€èˆ¬ä¸éœ€è¦ä¿®æ”¹é»˜è®¤å€¼ã€‚ é—æ†¾çš„æ˜¯ï¼Œæ¯å®¶é™æ€æ‰˜ç®¡å•†çš„è¡Œä¸º**éƒ½ä¸ä¸€æ ·**ï¼Œè€ŒæŠŠåŒä¸€ç½‘ç«™éƒ¨ç½²åˆ°ä¸åŒæœåŠ¡å•†çš„ç»“æœå¯èƒ½å¤§ç›¸å¾„åº­ã€‚ æ ¹æ®ä½ çš„æ‰˜ç®¡å•†çš„ä¸åŒï¼Œä½ å¯èƒ½éœ€è¦ä¿®æ”¹æ­¤é…ç½®ã€‚


## ä½¿ç”¨ç¯å¢ƒå˜é‡
æŠŠå¯èƒ½æ•æ„Ÿçš„ä¿¡æ¯æ”¾åœ¨ç¯å¢ƒå˜é‡ä¸­çš„åšæ³•å¾ˆå¸¸è§ã€‚

```jsx title="docusaurus.config.js"
// å¦‚æœä½ ç”¨ dotenv (https://www.npmjs.com/package/dotenv)
require('dotenv').config();

module.exports = {
  title: '...',
  url: process.env.URL, // ä½ ä¹Ÿå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æ§åˆ¶ç½‘ç«™ç»†èŠ‚
  // highlight-start
  customFields: {
    // æŠŠä½ çš„è‡ªå®šä¹‰ç¯å¢ƒæ”¾åœ¨è¿™é‡Œ
    teamEmail: process.env.EMAIL,
  },
  // highlight-end
};
```

```jsx title="home.jsx"
import useDocusaurusContext from '@docusaurus/useDocusaurusContext';

export default function Home() {
  const {
    siteConfig: {customFields},
  } = useDocusaurusContext();
  return <div>é€šè¿‡ {customFields.teamEmail} è”ç³»æˆ‘ä»¬ï¼</div>;
}
```

## é€‰æ‹©æ‰˜ç®¡æœåŠ¡å•†

æœ‰å‡ ç§å¸¸è§çš„æ‰˜ç®¡é€‰æ‹©ï¼š
* è‡ªè¡Œæ‰˜ç®¡ï¼Œé€šè¿‡ Apache2 æˆ– Nginx ä¸€ç±»çš„ HTTP æœåŠ¡å™¨ï¼›
* Jamstack æä¾›å•†ï¼Œæ¯”å¦‚ Netlify å’Œ Vercelã€‚ æˆ‘ä»¬ä¼šä»¥å®ƒä»¬ä¸ºå‚è€ƒï¼Œä½†åŒæ ·çš„é“ç†ä¹Ÿå¯ä»¥é€‚ç”¨äºå…¶ä»–æä¾›å•†ã€‚
* GitHub Pagesã€‚ ï¼ˆä»å®šä¹‰ä¸Šè¯´ï¼Œå®ƒä¹Ÿæ˜¯ Jamstackï¼Œä½†æˆ‘ä»¬ä¼šå•ç‹¬æ¯”è¾ƒå®ƒã€‚ï¼‰

````mdx-code-block
 
````
<details>
    <summary>æˆ‘æ„¿æ„ä¸ºæ­¤æŠ•å…¥å¤šå°‘èµ„æºï¼ˆæ—¶é—´å’Œé‡‘é’±ï¼‰ï¼Ÿ</summary>
    <li>ğŸ”´è‡ªè¡Œæ‰˜ç®¡æ˜¯æœ€éš¾è®¾ç½®çš„â€”â€”é€šå¸¸éœ€è¦ä¸€ä¸ªå¯Œæœ‰ç»éªŒçš„äººæ¥ç®¡ç†ã€‚ äº‘æœåŠ¡å‡ ä¹æ°¸è¿œä¸æ˜¯å…è´¹çš„ï¼Œè€Œæ­å»ºä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨å¹¶æŠŠå®ƒè¿æ¥åˆ°å¹¿åŸŸç½‘å¯èƒ½æ›´åŠ æ˜‚è´µã€‚</li>
    <li>ğŸŸ¢Jamstack æä¾›å•†å¯ä»¥å¸®åŠ©ä½ å»ºç«‹ä¸€ä¸ªè¿è½¬è‰¯å¥½çš„ç½‘ç«™ï¼Œå‡ ä¹ä¸éœ€è¦æ—¶é—´ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“é…ç½®åŠŸèƒ½ï¼Œæ¯”å¦‚æœåŠ¡ç«¯é‡å®šå‘ã€‚ è®¸å¤šæä¾›å•†çš„æ„å»ºæ—¶é—´é…é¢éå¸¸æ…·æ…¨ï¼Œ
        ç”šè‡³å…è´¹å¥—é¤ä¹Ÿå¤Ÿç”¨ï¼Œä½ å‡ ä¹æ°¸è¿œä¸ä¼šè¶…å‡ºé…é¢ã€‚ 
    ç„¶è€Œå®ƒæœ€ç»ˆè¿˜æ˜¯æœ‰é™çš„ä¸€æ—¦è¾¾åˆ°é™é¢ï¼Œå°±éœ€è¦ä»˜æ¬¾ã€‚ è¦äº†è§£è¯¦æƒ…ï¼Œè¯·æŸ¥çœ‹ä½ çš„æä¾›å•†çš„å®šä»·é¡µé¢ã€‚</li>
    <li>ğŸŸ¡GitHub Pages éƒ¨ç½²çš„å·¥ä½œæµç¨‹è®¾ç½®èµ·æ¥å¯èƒ½å¾ˆéº»çƒ¦ã€‚ ï¼ˆä¸ä¿¡çš„è¯ï¼Œå¯ä»¥çœ‹çœ‹éƒ¨ç½²åˆ° GitHub Pages éƒ¨åˆ†çš„é•¿åº¦ï¼ï¼‰ ä½†æ˜¯ï¼Œ
        è¿™é¡¹æœåŠ¡ï¼ˆåŒ…æ‹¬æ„å»ºå’Œéƒ¨ç½²ï¼‰å¯¹æ‰€æœ‰å…¬å…±ä»“åº“éƒ½æ°¸ä¹…å…è´¹ï¼Œå¹¶ä¸”æˆ‘ä»¬ä¹Ÿæœ‰è¯¦ç»†æ•™ç¨‹ï¼Œå¸®åŠ©ä½ æ­£ç¡®è¿è¡Œå®ƒã€‚</li>
</details>
<details>
    <summary>æˆ‘éœ€è¦å¤šå°‘æœåŠ¡ç«¯é…ç½®ï¼Ÿ</summary>
    <li>ğŸŸ¢ è‡ªè¡Œæ‰˜ç®¡æ—¶ï¼Œä½ å¯ä»¥æ§åˆ¶æ•´ä¸ªæœåŠ¡å™¨çš„é…ç½®ã€‚ ä½ å¯ä»¥æ ¹æ®è¯·æ±‚çš„ URL é…ç½®è™šæ‹Ÿä¸»æœºæä¾›ä¸åŒçš„æœåŠ¡ï¼›ä½ å¯ä»¥åšå¤æ‚çš„æœåŠ¡ç«¯é‡å®šå‘ï¼›
        ä½ å¯ä»¥æŠŠéƒ¨åˆ†ç½‘ç«™è®¾ç½®æˆè®¤è¯åè®¿é—®â€¦â€¦ å¦‚æœä½ éœ€è¦å¾ˆå¤šæœåŠ¡å™¨ç«¯åŠŸèƒ½ï¼Œè¯·é€‰æ‹©è‡ªè¡Œæ‰˜ç®¡ç½‘ç«™ã€‚</li>
    <li>ğŸŸ¡ Jamstack é€šå¸¸ä¼šæä¾›ä¸€äº›æœåŠ¡å™¨ç«¯é…ç½®ï¼Œæ¯”å¦‚ URL æ ¼å¼åŒ–ï¼ˆæ˜¯å¦å¸¦æœ‰æœ«å°¾æ–œæ ï¼‰ã€æœåŠ¡ç«¯é‡å®šå‘ç­‰ã€‚</li>
    <li>ğŸ”´ GitHub é¡µé¢é™¤äº†ä½¿ç”¨ HTTPS å’Œè®¾ç½® CNAME ä»¥å¤–ï¼Œæ²¡æœ‰æš´éœ²ä»»ä½•æœåŠ¡å™¨ç«¯çš„é…ç½®ã€‚</li>
</details>
<details>
    <summary>æˆ‘æ˜¯å¦éœ€è¦å›¢é˜Ÿåä½œï¼Ÿ</summary>
    <li>ğŸŸ¡ è‡ªè¡Œæ‰˜ç®¡å¯ä»¥è¾¾åˆ°å’Œ Netlify ä¸€æ ·çš„æ•ˆæœï¼Œä½†ä¸ºæ­¤ä»˜å‡ºçš„å·¥ä½œè¦å¤šå¾—å¤šã€‚ é€šå¸¸ï¼Œä½ ä¼šæœ‰ä¸€ä¸ªç‰¹å®šçš„äººè´Ÿè´£éƒ¨ç½²ï¼Œè€Œä¸”ç›¸æ¯”äºå…¶ä»–ä¸¤ä¸ªé€‰é¡¹ï¼Œå·¥ä½œæµç¨‹ä¹Ÿä¸ä¼šéå¸¸åŸºäº Gitã€‚</li>
    <li>ğŸŸ¢ Netlify å’Œ Vercel å¯¹æ¯ä¸ª Pull Request éƒ½ä¼šç”Ÿæˆéƒ¨ç½²é¢„è§ˆï¼Œè¿™å¯¹äºåœ¨åˆå¹¶åˆ°ç”Ÿäº§ç¯å¢ƒä¹‹å‰çš„å›¢é˜Ÿå®¡æ ¸å·¥ä½œéå¸¸æœ‰ç”¨ã€‚ ä½ ä¹Ÿå¯ä»¥åšå›¢é˜Ÿç®¡ç†ï¼Œä¸åŒæˆå‘˜æ‹¥æœ‰ä¸åŒçš„éƒ¨ç½²è®¿é—®æƒé™ã€‚</li>
    <li>ğŸŸ¡ GitHub é¡µé¢ä¸èƒ½åšéƒ¨ç½²é¢„è§ˆï¼Œè‡³å°‘æ–¹æ³•éå¸¸å¤æ‚ã€‚ æ¯ä¸ªä»“åº“åªèƒ½å’Œä¸€ä¸ªç«™ç‚¹éƒ¨ç½²ç›¸å…³è”ã€‚ å¦ä¸€æ–¹é¢ï¼Œä½ è¿˜æ˜¯å¯ä»¥æ§åˆ¶å“ªäº›äººæœ‰ç«™ç‚¹éƒ¨ç½²çš„å†™æƒé™ã€‚</li>
</details>
ä¸å­˜åœ¨é€šç”¨æ–¹æ¡ˆã€‚ ä½ éœ€è¦æƒè¡¡ä½ çš„éœ€æ±‚å’Œèµ„æºï¼Œç„¶åå†åšå†³å®šã€‚

## è‡ªè¡Œæ‰˜ç®¡
Docusaurus can be self-hosted using docusaurus serve. å¯ä»¥ç”¨ `--port` å’Œ `--host` æ¥åˆ†åˆ«æ›´æ”¹ç«¯å£å’Œç»‘å®šä¸»æœºã€‚

````mdx-code-block
<Tabs>
<TabItem value="npm" label="npm" default>

```bash
npm run serve -- --build --port 80 --host 0.0.0.0
```
</TabItem>
<TabItem value="yarn" label="yarn">

```bash npm2yarn
yarn run serve -- --build --port 80 --host 0.0.0.0
```
</TabItem>
</Tabs>
`````

:::warning
ç›¸è¾ƒäºå…¶ä»–é™æ€æ‰˜ç®¡æä¾›å•† / CDNï¼Œè¿™ä¸æ˜¯æœ€ä½³è§£å†³æ–¹æ¡ˆã€‚

åœ¨åé¢å‡ èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¼šä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„æ‰˜ç®¡æä¾›å•†ï¼Œä»¥åŠå¦‚ä½•åšæœ€æœ‰æ•ˆçš„ Docusaurus éƒ¨ç½²è®¾ç½®ã€‚ æœ‰äº›æ•™ç¨‹æ˜¯ç”±å¤–éƒ¨è´¡çŒ®è€…æä¾›çš„ã€‚ Docusaurus å’Œä»»ä½•æœåŠ¡éƒ½ä¸åˆ©ç›Šç›¸å…³ã€‚ æ–‡æ¡£å¯èƒ½ä¸æ˜¯æœ€æ–°çš„ï¼šæœåŠ¡æä¾›å•†çš„åç»­ API å˜æ›´å¯èƒ½æ²¡æœ‰åœ¨æœ¬æ–‡æ¡£ä¸­æœ‰æ‰€åæ˜ ã€‚ å¦‚æœä½ å‘ç°äº†è¿‡æ—¶çš„å†…å®¹ï¼Œæ¬¢è¿æ PRã€‚
é‰´äºåŒæ ·çš„æ–‡æ¡£æ›´æ–°é—®é¢˜ï¼Œæˆ‘ä»¬ä¸å†æ¥å—æ·»åŠ æ–°æ‰˜ç®¡æ–¹æ¡ˆçš„ PR äº†ã€‚ ä¸è¿‡ä½ å¯ä»¥åœ¨å…¶ä»–ç½‘ç«™ä¸Šå†™ä¸€ç¯‡å…³äºæŸä¸ªæœåŠ¡æä¾›å•†çš„æ–‡ç« ï¼ˆæ¯”å¦‚ä½ çš„åšå®¢ï¼Œæˆ–è€…æä¾›å•†å®˜ç½‘ï¼‰ï¼Œç„¶åè®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªè¿™ç¯‡æ–‡ç« çš„é“¾æ¥ã€‚
:::

éƒ¨ç½²åˆ° Netlify
è¦æŠŠ Docusaurus 2 ç«™ç‚¹éƒ¨ç½²åˆ° `Netlify`ï¼Œè¯·å…ˆç¡®ä¿æ­£ç¡®é…ç½®ä¸‹åˆ—é€‰é¡¹ï¼š
```jsx title="docusaurus.config.js"
module.exports = {
  url: 'https://docusaurus-2.netlify.app', // ä½ çš„ç½‘ç«™çš„ URLï¼Œæ²¡æœ‰ æœ«å°¾æ–œæ 
  baseUrl: '/', // ä½ çš„ç«™ç‚¹ç›¸å¯¹äºä»“åº“çš„è·¯å¾„
  // ...
};
```
ç„¶åï¼Œç”¨ [Netlify](https://app.netlify.com/start) åˆ›å»ºä½ çš„ç½‘ç«™ã€‚

åœ¨è®¾ç«‹ç«™ç‚¹æ—¶ï¼ŒæŒ‡å®šå¦‚ä¸‹æ„å»ºæŒ‡ä»¤å’Œç›®å½•ï¼š
* æ„å»ºæŒ‡ä»¤ï¼šnpm run build
* å‘å¸ƒç›®å½•ï¼šbuild

å¦‚æœä½ æ²¡æœ‰è®¾ç½®è¿™äº›æ„å»ºé€‰é¡¹ï¼Œä½ è¿˜æ˜¯å¯ä»¥åœ¨åˆ›å»ºç«™ç‚¹ä¹‹åå‰å¾€ "Site settings" -> "Build & deploy" å®Œæˆé…ç½®ã€‚

ç”¨ä¸Šè¿°é€‰é¡¹é…ç½®å®Œæ¯•åï¼Œä½ çš„ç½‘ç«™å°±ä¼šåœ¨æœ‰ä»£ç åˆå¹¶åˆ°éƒ¨ç½²åˆ†æ”¯ï¼ˆé»˜è®¤ä¸º mainï¼‰æ—¶è‡ªåŠ¨é‡æ–°éƒ¨ç½²ï¼Œ

:::caution æ³¨æ„
æŸäº› Docusaurus ç½‘ç«™æŠŠ `docs` æ–‡ä»¶å¤¹æ”¾åœ¨ `website` ä¹‹å¤–ï¼ˆå°¤å…¶æ˜¯ä» Docusaurus v1 è¿ç§»è€Œæ¥çš„ç«™ç‚¹ï¼‰ï¼š
```md
repo           # git æ ¹ç›®å½•
â”œâ”€â”€ docs       # MD æ–‡ä»¶
â””â”€â”€ website    # Docusaurus æ ¹ç›®å½•
```
å¦‚æœä½ é€‰æ‹©ç”¨ website æ–‡ä»¶å¤¹ä½œä¸º Netlify çš„ base directoryï¼Œé‚£ä¹ˆæ›´æ–° docs æ—¶ï¼ŒNetlify ä¸ä¼šè§¦å‘æ„å»ºã€‚ä½ éœ€è¦é…ç½®è‡ªå®šä¹‰ ignore å‘½ä»¤ï¼š
```toml title="website/netlify.toml"
[build]
  ignore = "git diff --quiet $CACHED_COMMIT_REF $COMMIT_REF . ../docs/"
```
:::

:::danger è­¦å‘Š
é»˜è®¤æƒ…å†µä¸‹ï¼ŒNetlify ä¼šä¸º Docusaurus URL æ·»åŠ æœ«å°¾æ–œæ ã€‚

å»ºè®®ç¦ç”¨ Netlify çš„ `Post Processing > Asset Optimization > Pretty Urls` é€‰é¡¹ï¼Œé˜²æ­¢ URL è‡ªåŠ¨å°å†™ã€ä¸å¿…è¦çš„é‡å®šå‘ã€404 é”™è¯¯ç­‰é—®é¢˜ã€‚

ç‰¹åˆ«å½“å¿ƒï¼š`Disable asset optimization` çš„å…¨å±€é€‰é¡¹ä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œå®é™…ä¸Šå¹¶ä¸ä¼šç¦ç”¨ `Pretty URLs` è®¾ç½®ã€‚ è¯·ç¡®ä¿å•ç‹¬å–æ¶ˆå‹¾é€‰äº† "Pretty URLs"ã€‚

å¦‚æœä½ æƒ³ä¿æŒå¼€å¯ `Pretty URLs` Netlify è®¾ç½®ï¼Œå°±è¦é€‚å½“é…ç½® Docusaurus çš„ `trailingSlash` é€‰é¡¹ã€‚

æ›´å¤šä¿¡æ¯è¯·å‚é˜… [slorber/trailing-slash-guide](https://github.com/slorber/trailing-slash-guide)ã€‚
:::


## éƒ¨ç½²åˆ° Vercel
éƒ¨ç½² Docusaurus é¡¹ç›®åˆ° [Vercel](https://vercel.com/) ä¼šå¸¦æ¥å¤šé¡¹æ”¶ç›Šï¼ŒåŒ…æ‹¬æ€§èƒ½ã€æ˜“ç”¨æ€§ï¼Œç­‰ç­‰ã€‚

è¦é€šè¿‡ [Vercel çš„ Git é›†æˆéƒ¨ç½²](https://vercel.com/docs/concepts/git)ä½ çš„ Docusaurus é¡¹ç›®ï¼Œå…ˆç¡®ä¿é¡¹ç›®å·²ç»è¢«æ¨é€åˆ°äº†æŸä¸ª Git ä»“åº“ä¸­ã€‚

ç”¨ [Import Flow ](https://vercel.com/import/git)æŠŠé¡¹ç›®å¯¼å…¥è¿› Vercelã€‚ åœ¨å¯¼å…¥è¿‡ç¨‹ä¸­ï¼Œä½ ä¼šçœ‹åˆ°æ‰€æœ‰ç›¸å…³é€‰é¡¹éƒ½å·²ç»é¢„å…ˆé…ç½®å¥½äº†ã€‚
ä¸è¿‡ï¼Œä½ è¿˜æ˜¯å¯ä»¥é€‰æ‹©æ›´æ”¹ä»»ä½•é€‰é¡¹ã€‚é€‰é¡¹åˆ—è¡¨å¯ä»¥åœ¨[è¿™é‡Œ](https://vercel.com/docs/build-step#build-&-development-settings)æ‰¾åˆ°ã€‚

é¡¹ç›®å¯¼å…¥å®Œæˆåï¼Œæ‰€æœ‰åˆ†æ”¯çš„åç»­æ¨é€éƒ½ä¼šç”Ÿæˆ[éƒ¨ç½²é¢„è§ˆ](https://vercel.com/docs/platform/deployments#preview)ã€‚
æ‰€æœ‰[ç”Ÿäº§åˆ†æ”¯](https://vercel.com/docs/git-integrations#production-branch)ï¼ˆé€šå¸¸æ˜¯ "main" æˆ– "master"ï¼‰çš„å˜æ›´éƒ½ä¼šè§¦å‘[ç”Ÿäº§éƒ¨ç½²](https://vercel.com/docs/platform/deployments#production)ã€‚


## éƒ¨ç½²åˆ° GitHub Pages
[Github Pages](https://pages.github.com/) å¯¹æ‰€æœ‰ GitHub ä»“åº“éƒ½å…è´¹ã€‚Docsaurus æä¾›äº†ä¸€ä¸ªä¾¿æ·çš„å‘å¸ƒé€”å¾„ã€‚

### æ¦‚è§ˆ
é€šå¸¸å‘å¸ƒè¿‡ç¨‹ä¼šæ¶‰åŠä¸¤ä¸ªä»“åº“ï¼ˆè‡³å°‘æ˜¯ä¸¤ä¸ªåˆ†æ”¯ï¼‰ï¼šåŒ…å«æºæ–‡ä»¶çš„åˆ†æ”¯ï¼Œå’ŒåŒ…å«è¦è¢«éƒ¨ç½²åˆ° GitHub Pages ä¸Šçš„æ„å»ºè¾“å‡ºçš„åˆ†æ”¯ã€‚ 
åœ¨ä¸‹é¢çš„æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šæŠŠè¿™ä¸¤ä¸ªä»“åº“ï¼ˆåˆ†æ”¯ï¼‰åˆ†åˆ«å«ä½œæºä»“åº“ï¼ˆåˆ†æ”¯ï¼‰å’Œéƒ¨ç½²ä»“åº“ï¼ˆåˆ†æ”¯ï¼‰ã€‚

æ¯ä¸ª GitHub ä»“åº“éƒ½å…³è”æœ‰ä¸€ä¸ª GitHub Pages æœåŠ¡ã€‚ å¦‚æœéƒ¨ç½²ä»“åº“å«ä½œ `my-org/my-project`ï¼ˆ`my-org` æ˜¯ç»„ç»‡åæˆ–ç”¨æˆ·åï¼‰ï¼Œé‚£ä¹ˆç½‘ç«™ä¼šè¢«éƒ¨ç½²åœ¨ `https://my-org.github.io/my-project/` å¤„ã€‚ 
ç‰¹åˆ«åœ°ï¼Œå¦‚æœéƒ¨ç½²ä»“åº“å«ä½œ `my-org/my-org.github.io`ï¼ˆä¹Ÿå°±æ˜¯ *ç»„ç»‡ GitHub Pages ä»“åº“*ï¼‰ï¼Œé‚£ä¹ˆç½‘ç«™ä¼šè¢«éƒ¨ç½²åœ¨ `https://my-org.github.io/`ã€‚

:::info ä¿¡æ¯
å¦‚æœä½ éœ€è¦ä¸º GitHub Pages è‡ªå®šä¹‰åŸŸåï¼Œå¯ä»¥åœ¨ `static` ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª CNAME æ–‡ä»¶ã€‚ 
`static` ç›®å½•ä¸­çš„å†…å®¹ä¼šåœ¨éƒ¨ç½²æ—¶è¢«å¤åˆ¶åˆ° `build` æ–‡ä»¶å¤¹çš„æ ¹éƒ¨ã€‚ ä½¿ç”¨è‡ªå®šä¹‰åŸŸåæ—¶ï¼Œå°±å¯ä»¥æŠŠ `baseUrl: '/projectName/'` æ”¹å› `baseUrl: '/'` äº†ï¼Œä¹Ÿå¯ä»¥æŠŠ `url` è®¾ç½®æˆä½ çš„è‡ªå®šä¹‰åŸŸåã€‚

ä½ å¯ä»¥å‚é˜… GitHub Pages çš„å…³äº [GitHub Pages](https://docs.github.com/cn/pages/getting-started-with-github-pages/about-github-pages) æ–‡æ¡£äº†è§£è¯¦æƒ…ã€‚
:::

Github Pages ä¼šä»é»˜è®¤åˆ†æ”¯ï¼ˆä¸€èˆ¬æ˜¯ `master`/`main`ï¼‰æˆ–è€… `gh-pages` åˆ†æ”¯ä¸­æå–éƒ¨ç½²æ–‡ä»¶ï¼ˆè¿è¡Œ `docusaurus build` äº§ç”Ÿçš„æ–‡ä»¶ï¼‰ã€‚
æ–‡ä»¶å¯ä»¥æ”¾åœ¨æ ¹ç›®å½•ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨ `/docs` ç›®å½•ä¸­ã€‚ ä½ å¯ä»¥åœ¨ä»“åº“çš„ Settings > Pages å¤„é…ç½®ã€‚ è¿™ä¸ªåˆ†æ”¯ä¼šè¢«ç§°ä½œã€Œéƒ¨ç½²åˆ†æ”¯ã€ã€‚

æˆ‘ä»¬æä¾›äº† `docusaurus deploy` å‘½ä»¤ï¼Œå¸®åŠ©ä½ ä»æºä»“åº“éƒ¨ç½²åˆ°éƒ¨ç½²ä»“åº“ï¼Œä¸€æ­¥å®Œæˆå…‹éš†ã€æ„å»ºã€æäº¤ã€‚

### `docusaurus.config.js` è®¾ç½®
é¦–å…ˆï¼Œä¿®æ”¹ä½ çš„ docusaurus.config.jsï¼Œæ·»åŠ å¦‚ä¸‹å‚æ•°ï¼š

| `organizationName` | æ‹¥æœ‰éƒ¨ç½²ä»“åº“çš„ GitHub ç”¨æˆ·æˆ–ç»„ç»‡ã€‚                           |
| ------------------ | ------------------------------------------------------------ |
| `projectName`      | éƒ¨ç½²ä»“åº“çš„åå­—ã€‚                                             |
| `deploymentBranch` | éƒ¨ç½²åˆ†æ”¯çš„åå­—ã€‚ å¯¹äºä¸æ˜¯ç»„ç»‡ GitHub Pages ä»“åº“ï¼ˆ`projectName` ä¸ä»¥ `.github.io` ç»“å°¾ï¼‰çš„ä»“åº“ï¼Œé»˜è®¤ä¸º `'gh-pages'`ã€‚ å¦åˆ™ï¼Œè¿™ä¸ªå­—æ®µéœ€è¦æ˜ç¡®é€šè¿‡é…ç½®æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡å®šä¹‰ã€‚ |

:::caution  æ³¨æ„
GitHub Pages é»˜è®¤ä¸º Docusaurus ç½‘å€é“¾æ¥æ·»åŠ æœ«å°¾æ–œæ ã€‚ å»ºè®®è®¾ç½® trailingSlashï¼ˆtrue æˆ– false éƒ½å¯ä»¥ï¼Œåªè¦ä¸æ˜¯ undefinedï¼‰ã€‚
:::
ç¤ºä¾‹ï¼š
```jsx title="docusaurus.config.js"
module.exports = {
  // ...
  url: 'https://endiliey.github.io', // ä½ çš„ç½‘ç«™ URL
  baseUrl: '/',
  //highlight-start
  projectName: 'endiliey.github.io',
  organizationName: 'endiliey',
  trailingSlash: false,
  //highlight-end
  // ...
};
```
:::danger è­¦å‘Š
é»˜è®¤æƒ…å†µä¸‹ï¼ŒGitHub Pages ä¼šç”¨ [Jekyll](https://jekyllrb.com/) æ„å»ºè¦è¢«å‘å¸ƒçš„æ–‡ä»¶ã€‚ å› ä¸º Jekyll ä¼šå¿½ç•¥æ‰€æœ‰ä»¥ _ å¼€å¤´çš„æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¨èä½ åœ¨ static æ–‡ä»¶å¤¹ä¸­æ–°å»ºä¸€ä¸ª .nojekyll æ–‡ä»¶æ¥ç¦ç”¨ Jekyllã€‚
:::

### ç¯å¢ƒè®¾ç½®
| å‚æ•°             | æè¿°                                                         |
| ---------------- | ------------------------------------------------------------ |
| `USE_SSH`        | è®¾ç½®ä¸º `true` æ—¶ï¼Œä¼šç”¨ SSH è€Œä¸æ˜¯é»˜è®¤çš„ HTTPS æ¥è¿æ¥åˆ° GitHub æºä»“åº“ã€‚ å¦‚æœæºä»“åº“çš„åœ°å€æ˜¯ SSH URLï¼ˆæ¯”å¦‚ `git@github.com:facebook/docusaurus.git`ï¼‰ï¼Œ`USE_SSH` ä¼šè¢«æ¨æ–­ä¸º `true`ã€‚ |
| `GIT_USER`       | ç”¨äºæ¨é€éƒ¨ç½²æ–‡ä»¶çš„ GitHub è´¦æˆ·ç”¨æˆ·åï¼Œ**éœ€è¦æœ‰éƒ¨ç½²ä»“åº“çš„æ¨é€æƒé™**ã€‚ å¯¹äºä½ è‡ªå·±çš„ä»“åº“ï¼Œè¿™ä¸€èˆ¬ä¼šæ˜¯ä½ è‡ªå·±çš„ GitHub ç”¨æˆ·åã€‚ ä¸ä½¿ç”¨ SSH æ—¶å¿…å¡«ï¼Œä½¿ç”¨ SSH æ—¶åˆ™ä¼šè¢«å¿½ç•¥ã€‚ |
| `GIT_PASS`       | GitHub ç”¨æˆ·ï¼ˆ`GIT_USER` æ‰€æŒ‡å®šï¼‰çš„ personal access tokenï¼Œç”¨äºéäº¤äº’å¼éƒ¨ç½²ï¼ˆå¦‚æŒç»­éƒ¨ç½²ï¼‰ |
| `CURRENT_BRANCH` | æºåˆ†æ”¯ã€‚ è¿™ä¸ªåˆ†æ”¯ä¸€èˆ¬æ˜¯ `main` æˆ– `master`ï¼Œä½†å®ƒä¹Ÿå¯ä»¥æ˜¯ `gh-pages` ä¹‹å¤–çš„ä»»ä½•åˆ†æ”¯ã€‚ å¦‚æœå˜é‡æ²¡æœ‰èµ‹å€¼ï¼Œé‚£ä¹ˆä¼šä½¿ç”¨ `docusaurus deploy` è¢«è°ƒç”¨æ—¶çš„åˆ†æ”¯ã€‚ |

GitHub ä¼ä¸šå®‰è£…ç‰ˆåº”è¯¥å’Œ github.com çš„å·¥ä½œæ–¹å¼ä¸€è‡´ã€‚ä½ åªéœ€è¦åœ¨ç¯å¢ƒå˜é‡ä¸­è®¾ç½®ç»„ç»‡çš„ GitHub ä¼ä¸šä¸»æœºå³å¯ã€‚

| å‚æ•°          | æè¿°                         |
| ------------- | ---------------------------- |
| `GITHUB_HOST` | ä½ çš„ GitHub ä¼ä¸šç½‘ç«™çš„åŸŸåã€‚ |
| `GITHUB_PORT` | ä½ çš„ GitHub ä¼ä¸šç½‘ç«™çš„ç«¯å£ã€‚ |

### éƒ¨ç½²
æœ€åï¼Œè¦æŠŠä½ çš„ç½‘ç«™éƒ¨ç½²åˆ° GitHub Pages ä¸Šï¼Œè¯·è¿è¡Œï¼š

````mdx-code-block
<Tabs>
<TabItem value="Bash" label="Bash" default>

```bash
GIT_USER=<GITHUB_USERNAME> yarn deploy
```
</TabItem>
<TabItem value="Windows" label="Windows">

```bash npm2yarn
cmd /C "set "GIT_USER=<GITHUB_USERNAME>" && yarn deploy"
```
</TabItem>
<TabItem value="PowerShell" label="PowerShell">

```bash npm2yarn
cmd /C 'set "GIT_USER=<GITHUB_USERNAME>" && yarn deploy'
```
</TabItem>
</Tabs>
`````

:::caution æ³¨æ„
ä» 2021 å¹´ 8 æœˆå¼€å§‹ï¼ŒGitHub è¦æ±‚æ¯æ¬¡å‘½ä»¤è¡Œç™»å½•éƒ½ä½¿ç”¨ä¸ªäººè®¿é—®ä»¤ç‰Œï¼Œè€Œä¸æ˜¯å¯†ç ã€‚ å½“ GitHub æç¤ºä½ è¾“å…¥å¯†ç æ—¶ï¼Œè¯·è¾“å…¥ä¸ªäººè®¿é—®ä»¤ç‰Œã€‚ 
æ›´å¤šä¿¡æ¯è¯·è§ [GitHub](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token) æ–‡æ¡£ã€‚

æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ SSH (USE_SSH=true) ç™»å½•ã€‚
:::

### è§¦å‘ GitHub Actions éƒ¨ç½²
[GitHub Actions](https://help.github.com/en/actions) å…è®¸ä½ åœ¨ä»“åº“ä¸­å®Œæˆè½¯ä»¶å¼€å‘æµç¨‹çš„è‡ªåŠ¨åŒ–ã€è‡ªå®šä¹‰æ‰§è¡Œã€‚

ä¸‹é¢çš„å·¥ä½œæµç¤ºä¾‹ä¼šå‡è®¾ä½ çš„ç½‘ç«™æºç åœ¨ä»“åº“çš„ main åˆ†æ”¯ï¼ˆä¹Ÿå°±æ˜¯æºåˆ†æ”¯ä¸º `main`ï¼‰ï¼Œè€Œå‘å¸ƒæºè®¾ç½®ä¸º `gh-pages` åˆ†æ”¯ï¼ˆä¹Ÿå°±æ˜¯éƒ¨ç½²åˆ†æ”¯ä¸º `gh-pages`ï¼‰ã€‚

æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ï¼š
1. å½“å‘ `main` å‘èµ·æ–°çš„æ‹‰å–è¯·æ±‚æ—¶ï¼Œæœ‰ä¸€ä¸ª `action` ç¡®ä¿ç½‘ç«™æ„å»ºæˆåŠŸï¼Œä½†ä¸ä¼šçœŸæ­£éƒ¨ç½²ã€‚ è¿™ä¸ª `job` ä¼šè¢«ç§°ä¸º `test-deploy`ã€‚
2. å½“ä¸€ä¸ªæ‹‰å–è¯·æ±‚è¢«åˆå¹¶åˆ° `main` åˆ†æ”¯ï¼Œæˆ–ç›´æ¥å‘ `main` åˆ†æ”¯æ¨é€æ—¶ï¼Œç«™ç‚¹ä¼šè¢«æ„å»ºå¹¶éƒ¨ç½²åˆ° `gh-pages` åˆ†æ”¯ã€‚ 
åœ¨è¿™ä¹‹åï¼Œæ–°çš„æ„å»ºè¾“å‡ºä¼šè¢«å‘å¸ƒåœ¨ `GitHub Pages` ç½‘ç«™ä¸Šã€‚ è¿™ä¸ª `job` ä¼šè¢«ç§°ä¸º `deployã€‚`

ä¸‹é¢æ˜¯ä¸¤ç§é€šè¿‡ GitHub Actions éƒ¨ç½²æ–‡æ¡£çš„æ–¹æ³•ã€‚ æ ¹æ®ä½ çš„éƒ¨ç½²åˆ†æ”¯çš„ä½ç½® (gh-pages)ï¼Œé€‰æ‹©ç›¸åº”çš„é€‰é¡¹ï¼š
1. æºä»£ç ä»“åº“å’Œéƒ¨ç½²ä»£ç ä»“åº“æ˜¯åŒä¸€ä»“åº“ã€‚
2. éƒ¨ç½²ä»“åº“æ˜¯ä¸€ä¸ªè¿œç¨‹ä»“åº“ï¼Œå’Œæºä»“åº“ä¸åŒã€‚

````mdx-code-block
<Tabs>
<TabItem value="1" label="åŒä¸€" default>
<p>è™½ç„¶ä½ å¯ä»¥æŠŠä¸¤ä¸ª job å®šä¹‰åœ¨åŒä¸€ä¸ªå·¥ä½œæµæ–‡ä»¶ä¸­ï¼Œä½†åŸå§‹çš„ deploy å·¥ä½œæµæ°¸è¿œä¼šåœ¨ PR çš„æ£€æŸ¥çŠ¶æ€ä¸­è¢«æ˜¾ç¤ºä¸ºè·³è¿‡ï¼Œå¹¶æ²¡æœ‰ä¼ è¾¾ä»»ä½•çœŸå®çŠ¶æ€ä¿¡æ¯ï¼Œå¯¹å®¡æŸ¥å·¥ä½œä¹Ÿæ²¡æœ‰ä»»ä½•ä»·å€¼ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬å»ºè®®æŠŠå®ƒä»¬ä½œä¸ºå•ç‹¬çš„å·¥ä½œæµæ¥ç®¡ç†ã€‚
</p>
<p>æˆ‘ä»¬ä¼šä½¿ç”¨ä¸€ä¸ªæµè¡Œçš„ç¬¬ä¸‰æ–¹éƒ¨ç½² action:<a href="https://github.com/peaceiris/actions-gh-pages#%EF%B8%8F-docusaurus">peaceiris/actions-gh-pages</a>ã€‚</p>

<details>
<summary>GitHub action æ–‡ä»¶</summary>
<p>æ·»åŠ è¿™ä¸¤ä¸ªå·¥ä½œæµæ–‡ä»¶ï¼š</p>

:::danger æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´å‚æ•°
è¿™äº›æ–‡ä»¶å‡è®¾ä½ ä½¿ç”¨çš„æ˜¯ Yarnã€‚ å¦‚æœä½ ç”¨çš„æ˜¯ npmï¼Œéœ€è¦æŠŠ `cache: yarn`ã€`yarn install --frozen-lockfile`ã€`yarn build` 
åˆ†åˆ«ä¿®æ”¹æˆ `cache: npm`ã€`npm ci`ã€`npm run build`ã€‚

å¦‚æœä½ çš„ Docusaurus é¡¹ç›®ä¸åœ¨ä½ çš„ä»“åº“çš„æ ¹ç›®å½•ï¼Œä½ å¯èƒ½éœ€è¦é…ç½®[é»˜è®¤å·¥ä½œç›®å½•](https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#example-set-the-default-shell-and-working-directory)ï¼Œå¹¶ç›¸åº”åœ°è°ƒæ•´è·¯å¾„ã€‚
:::

<details>
<summary>.github/workflows/deploy.yml</summary>

```YAML title=".github/workflows/deploy.yml"
name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main
    # Review gh actions docs if you want to further define triggers, paths, etc
    # https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#on

jobs:
  deploy:
    name: Deploy to GitHub Pages
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: 18
          cache: yarn

      - name: Install dependencies
        run: yarn install --frozen-lockfile
      - name: Build website
        run: yarn build

      # Popular action to deploy to GitHub Pages:
      # Docs: https://github.com/peaceiris/actions-gh-pages#%EF%B8%8F-docusaurus
      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          # Build output to publish to the `gh-pages` branch:
          publish_dir: ./build
          # The following lines assign commit authorship to the official
          # GH-Actions bot for deploys to `gh-pages` branch:
          # https://github.com/actions/checkout/issues/13#issuecomment-724415212
          # The GH actions bot is used by default if you didn't specify the two fields.
          # ä½ å¯ä»¥ç”¨è‡ªå·±çš„ç”¨æˆ·ä¿¡æ¯æ›¿æ¢å®ƒä»¬ã€‚
          user_name: github-actions[bot]
          user_email: 41898282+github-actions[bot]@users.noreply.github.com
```
</details>


<details>
<summary>.github/workflows/test-deploy.yml</summary>

```yarn title=".github/workflows/test-deploy.yml"
name: Test deployment

on:
  pull_request:
    branches:
      - main
    # Review gh actions docs if you want to further define triggers, paths, etc
    # https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#on

jobs:
  test-deploy:
    name: Test deployment
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: 18
          cache: yarn

      - name: Install dependencies
        run: yarn install --frozen-lockfile
      - name: Test build website
        run: yarn build
```
</details>
</details>

<details>
<summary>ç½‘ç«™æ²¡æœ‰æ­£ç¡®éƒ¨ç½²ï¼Ÿ</summary>
<li>æ¨é€åˆ°ä¸»åˆ†æ”¯åï¼Œå¦‚æœä½ å‘ç°ç½‘ç«™æ²¡æœ‰éƒ¨ç½²åœ¨æ­£ç¡®çš„ä½ç½®ï¼ˆæ¯”å¦‚å®ƒè¯´ "There isn't a GitHub Pages site here"ï¼Œæˆ–è€…æ˜¾ç¤ºçš„æ˜¯ä½ çš„ä»“åº“çš„README.md æ–‡ä»¶ï¼‰ï¼Œå¯ä»¥æ£€æŸ¥å¦‚ä¸‹é—®é¢˜ï¼š</li>
<li>GitHub pages å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´æ‰èƒ½è·å–æ–°çš„æ–‡ä»¶ï¼Œæ‰€ä»¥å…ˆç­‰å¤§æ¦‚ 3 åˆ†é’Ÿï¼Œç„¶ååˆ·æ–°ï¼Œå†ç¡®å®šå®ƒæ˜¯ä¸æ˜¯çœŸçš„ä¸èƒ½å·¥ä½œã€‚</li>
<li>åœ¨ä½ çš„ä»“åº“çš„ä¸»é¡µé¢ä¸Šï¼Œä½ åº”è¯¥èƒ½åœ¨ä¸Šæ¬¡æäº¤çš„æ ‡é¢˜æ—è¾¹çœ‹åˆ°ä¸€ä¸ªå°ç»¿å‹¾ï¼Œä»£è¡¨ CI é€šè¿‡äº†ã€‚ å¦‚æœä½ çœ‹åˆ°çš„æ˜¯ä¸€ä¸ªå‰ï¼Œä»£è¡¨æ„å»ºæˆ–éƒ¨ç½²å¤±è´¥äº†ã€‚æ­¤æ—¶ä½ éœ€è¦æ£€æŸ¥æ—¥å¿—è·å–æ›´å¤šè°ƒè¯•ä¿¡æ¯ã€‚</li>
<li>ç‚¹å‡»ç»¿å‹¾ï¼Œç¡®å®šä½ çœ‹åˆ°äº† "Deploy to GitHub Pages" å·¥ä½œæµã€‚ "pages build and deployment / deploy" è¿™æ ·çš„åå­—æ˜¯ GitHub çš„é»˜è®¤å·¥ä½œæµï¼Œä»£è¡¨ä½ çš„è‡ªå®šä¹‰éƒ¨ç½²å·¥ä½œæµå®Œå…¨æ²¡æœ‰è§¦å‘ã€‚ 
ç¡®ä¿ YAML æ–‡ä»¶æ”¾åœ¨äº† .github/workflows ç›®å½•ä¸‹ï¼Œå¹¶ä¸”è§¦å‘æ¡ä»¶è®¾ç½®æ­£ç¡®ï¼ˆæ¯”å¦‚å¦‚æœä½ çš„é»˜è®¤åˆ†æ”¯æ˜¯ "master" è€Œä¸æ˜¯ "main"ï¼Œä½ å°±éœ€è¦ä¿®æ”¹ on.push å­—æ®µï¼‰ã€‚
</li>
<li>æˆ‘ä»¬ä½¿ç”¨ gh-pages ä½œä¸ºéƒ¨ç½²åˆ†æ”¯ã€‚ åœ¨ä½ çš„ä»“åº“çš„ Settings > Pages ä¸‹ï¼Œç¡®ä¿ "Source"ï¼ˆæ­¤å¤„æ˜¯éƒ¨ç½²æ–‡ä»¶çš„æºä»£ç ï¼Œè€Œä¸æ˜¯ä¸Šæ–‡æ‰€ç”¨æœ¯è¯­æ‰€æŒ‡çš„æºä»£ç ï¼‰è¢«è®¾ä¸ºäº† "gh-pages" + "/ (root)"ã€‚</li>
<li>å¦‚æœä½ ç”¨äº†è‡ªå®šä¹‰åŸŸåï¼Œç¡®ä¿ DNS è®°å½•æŒ‡å‘äº† GitHub pages æœåŠ¡å™¨çš„ IPã€‚</li>
</details>
</TabItem>


<TabItem value="2" label="è¿œç¨‹">
è·¨ä»“åº“çš„å‘å¸ƒæ›´éš¾è®¾ç½®ï¼Œå› ä¸ºä½ éœ€è¦é€šè¿‡æƒé™æ£€æŸ¥æ‰èƒ½æ¨é€åˆ°å¦ä¸€ä¸ªä»“åº“ã€‚ æˆ‘ä»¬ä¼šä½¿ç”¨ SSH å®Œæˆèº«ä»½éªŒè¯ã€‚
<li>ç”Ÿæˆä¸€ä¸ªæ–° SSH å¯†é’¥ã€‚ å› ä¸ºè¿™ä¸ª SSH å¯†é’¥ä¼šç”¨åœ¨ CI ä¸­ï¼Œæ‰€ä»¥ä¸èƒ½è¾“å…¥ä»»ä½•å¯†ç ã€‚</li>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ çš„å…¬é’¥åº”è¯¥ä¼šè¢«åˆ›å»ºåœ¨ ~/.ssh/id_rsa.pub ä¸­ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆåœ¨æ·»åŠ  GitHub éƒ¨ç½²å¯†é’¥æ—¶ï¼Œè¦è®°å¾—ä½¿ç”¨ä½ åœ¨å‰ä¸€æ­¥ä¸­æä¾›çš„åå­—ã€‚</li>
<li>ç”¨ pbcopy  ~/.ssh/id_rsa.pub æŠŠå¯†é’¥å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œç„¶ååœ¨ä½ çš„éƒ¨ç½²ä»“åº“ä¸­ï¼ŒæŠŠå®ƒç²˜è´´å…¥éƒ¨ç½²å¯†é’¥ã€‚ å¦‚æœå‘½ä»¤è¡Œä¸é€‚åˆï¼Œå¯ä»¥æ‰‹åŠ¨å¤åˆ¶æ–‡ä»¶å†…å®¹ã€‚
 åœ¨ä¿å­˜éƒ¨ç½²å¯†é’¥ä¹‹å‰ï¼Œè¦å‹¾é€‰ Allow write accessã€‚
</li>
<li>ä½ éœ€è¦æŠŠä½ çš„ç§é’¥è®¾ç½®æˆ <a href="https://help.github.com/en/actions/configuring-and-managing-workflows/creating-and-storing-encrypted-secrets">GitHub secret</a>ï¼Œ
ä»è€Œå…è®¸ Docusaurus ä¸ºä½ è¿è¡Œéƒ¨ç½²ã€‚</li>
<li>ç”¨ pbcopy  ~/.ssh/id_rsa å¤åˆ¶ä½ çš„ç§é’¥ï¼Œç„¶åæŠŠå®ƒç²˜è´´æˆä¸€ä¸ª GitHub secretï¼Œåå­—å« GH_PAGES_DEPLOYã€‚ å¦‚æœå‘½ä»¤è¡Œä¸é€‚åˆï¼Œå¯ä»¥æ‰‹åŠ¨å¤åˆ¶æ–‡ä»¶å†…å®¹ã€‚ ä¿å­˜ä½ çš„ secretã€‚</li>
<li>åœ¨ .github/workflows/ ä¸­åˆ›å»ºä½ çš„æ–‡æ¡£
<a href="https://help.github.com/en/actions/configuring-and-managing-workflows/configuring-a-workflow#creating-a-workflow-file">å·¥ä½œæµæ–‡ä»¶</a>ã€‚
 åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œå°±æ˜¯ deploy.ymlã€‚</li>
<li>ç°åœ¨ï¼Œä½ åº”è¯¥å¤§æ¦‚æœ‰ï¼šä¸€ä¸ªæºä»£ç ä»“åº“ï¼Œè®¾ç½®äº† GitHub å·¥ä½œæµå’Œä½œä¸º GitHub Secret çš„ SSH ç§é’¥ï¼Œä»¥åŠä¸€ä¸ªéƒ¨ç½²ä»“åº“ï¼Œåœ¨ GitHub éƒ¨ç½²å¯†é’¥ä¸­è®¾ç½®äº† SSH å…¬é’¥ã€‚</li>

<details>
<summary>GitHub action æ–‡ä»¶</summary>

:::danger
è¯·ç¡®ä¿æŠŠ `actions@github.com` æ›¿æ¢æˆäº†ä½ çš„ GitHub ç”µå­é‚®ä»¶ï¼Œå¹¶æŠŠ `gh-actions` æ›¿æ¢æˆäº†ä½ çš„åå­—ã€‚
è¿™ä¸ªæ–‡ä»¶å‡è®¾ä½ ä½¿ç”¨çš„æ˜¯ Yarnã€‚ å¦‚æœä½ ç”¨çš„æ˜¯ npmï¼Œéœ€è¦æŠŠ `cache: yarn`ã€`yarn install --frozen-lockfile`ã€`yarn build` åˆ†åˆ«ä¿®æ”¹æˆ `cache: npm`ã€`npm ci`ã€`npm run build`ã€‚
:::
```YAML title=".github/workflows/deploy.yml"
name: Deploy to GitHub Pages

on:
  pull_request:
    branches: [main]
  push:
    branches: [main]

jobs:
  test-deploy:
    if: github.event_name != 'push'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: 18
          cache: yarn
      - name: Install dependencies
        run: yarn install --frozen-lockfile
      - name: Test build website
        run: yarn build
  deploy:
    if: github.event_name != 'pull_request'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: 18
          cache: yarn
      - uses: webfactory/ssh-agent@v0.5.0
        with:
          ssh-private-key: ${{ secrets.GH_PAGES_DEPLOY }}
      - name: Deploy to GitHub Pages
        env:
          USE_SSH: true
        run: |
          git config --global user.email "actions@github.com"
          git config --global user.name "gh-actions"
          yarn install --frozen-lockfile
          yarn deploy
```

<details>
<summary>ç½‘ç«™æ²¡æœ‰æ­£ç¡®éƒ¨ç½²ï¼Ÿ</summary>
æ¨é€åˆ°ä¸»åˆ†æ”¯åï¼Œå¦‚æœä½ å‘ç°ç½‘ç«™æ²¡æœ‰éƒ¨ç½²åœ¨æ­£ç¡®çš„ä½ç½®ï¼ˆæ¯”å¦‚å®ƒè¯´ "There isn't a GitHub Pages site here"ï¼Œæˆ–è€…æ˜¾ç¤ºçš„æ˜¯ä½ çš„ä»“åº“çš„README.md æ–‡ä»¶ï¼‰ï¼Œå¯ä»¥æ£€æŸ¥å¦‚ä¸‹é—®é¢˜ï¼š
<li>GitHub pages å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´æ‰èƒ½è·å–æ–°çš„æ–‡ä»¶ï¼Œæ‰€ä»¥å…ˆç­‰å¤§æ¦‚ 3 åˆ†é’Ÿï¼Œç„¶ååˆ·æ–°ï¼Œå†ç¡®å®šå®ƒæ˜¯ä¸æ˜¯çœŸçš„ä¸èƒ½å·¥ä½œã€‚</li>
<li>åœ¨ä½ çš„ä»“åº“çš„ä¸»é¡µé¢ä¸Šï¼Œä½ åº”è¯¥èƒ½åœ¨ä¸Šæ¬¡æäº¤çš„æ ‡é¢˜æ—è¾¹çœ‹åˆ°ä¸€ä¸ªå°ç»¿å‹¾ï¼Œä»£è¡¨ CI é€šè¿‡äº†ã€‚ å¦‚æœä½ çœ‹åˆ°çš„æ˜¯ä¸€ä¸ªå‰ï¼Œä»£è¡¨æ„å»ºæˆ–éƒ¨ç½²å¤±è´¥äº†ã€‚æ­¤æ—¶ä½ éœ€è¦æ£€æŸ¥æ—¥å¿—è·å–æ›´å¤šè°ƒè¯•ä¿¡æ¯ã€‚
</li>
<li>ç‚¹å‡»ç»¿å‹¾ï¼Œç¡®å®šä½ çœ‹åˆ°äº† "Deploy to GitHub Pages" å·¥ä½œæµã€‚ "pages build and deployment / deploy" è¿™æ ·çš„åå­—æ˜¯ GitHub çš„é»˜è®¤å·¥ä½œæµï¼Œ
ä»£è¡¨ä½ çš„è‡ªå®šä¹‰éƒ¨ç½²å·¥ä½œæµå®Œå…¨æ²¡æœ‰è§¦å‘ã€‚ ç¡®ä¿ YAML æ–‡ä»¶æ”¾åœ¨äº† .github/workflows ç›®å½•ä¸‹ï¼Œå¹¶ä¸”è§¦å‘æ¡ä»¶è®¾ç½®æ­£ç¡®ï¼ˆæ¯”å¦‚å¦‚æœä½ çš„é»˜è®¤åˆ†æ”¯æ˜¯ "master" è€Œä¸æ˜¯ "main"ï¼Œä½ å°±éœ€è¦ä¿®æ”¹ on.push å­—æ®µï¼‰ã€‚
</li>
<li>æˆ‘ä»¬ä½¿ç”¨ gh-pages ä½œä¸ºéƒ¨ç½²åˆ†æ”¯ã€‚ åœ¨ä½ çš„ä»“åº“çš„ Settings > Pages ä¸‹ï¼Œç¡®ä¿ "Source"ï¼ˆæ­¤å¤„æ˜¯éƒ¨ç½²æ–‡ä»¶çš„æºä»£ç ï¼Œè€Œä¸æ˜¯ä¸Šæ–‡æ‰€ç”¨æœ¯è¯­æ‰€æŒ‡çš„æºä»£ç ï¼‰è¢«è®¾ä¸ºäº† "gh-pages" + "/ (root)"ã€‚
</li>
<li>å¦‚æœä½ ç”¨äº†è‡ªå®šä¹‰åŸŸåï¼Œç¡®ä¿ DNS è®°å½•æŒ‡å‘äº† GitHub pages æœåŠ¡å™¨çš„ IPã€‚
</li>
</details>

</details>

</TabItem>
</Tabs>
`````





